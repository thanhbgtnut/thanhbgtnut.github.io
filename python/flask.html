
<!-- saved from url=(0050)https://dttvn0010.github.io/python_tutorial/flask/ -->
<html>
    <head>
            <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

            <!-- Custom fonts for this template -->
            <link href="../vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
            <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
            <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
          
            <!-- Custom styles for this template -->
            <link href="../css/clean-blog.min.css" rel="stylesheet">

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style type="text/css">@import url('https://themes.googleusercontent.com/fonts/css?kit=cGvuclDC_Z1vE_cnVEU6Ae_NZQ7StBcqH_vXVqoPMX0');ul.lst-kix_59cwpstquhir-0{list-style-type:none}.lst-kix_mzdqbryq6jx5-6>li:before{content:"\0025cf  "}.lst-kix_mzdqbryq6jx5-7>li:before{content:"\0025cb  "}ul.lst-kix_p2i2djphr8cn-8{list-style-type:none}ul.lst-kix_59cwpstquhir-4{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-1{list-style-type:none}ul.lst-kix_p2i2djphr8cn-7{list-style-type:none}ul.lst-kix_59cwpstquhir-3{list-style-type:none}.lst-kix_mzdqbryq6jx5-4>li:before{content:"\0025cb  "}.lst-kix_mzdqbryq6jx5-8>li:before{content:"\0025a0  "}ul.lst-kix_iv67mwnkt0ou-0{list-style-type:none}ul.lst-kix_59cwpstquhir-2{list-style-type:none}ul.lst-kix_59cwpstquhir-1{list-style-type:none}ul.lst-kix_59cwpstquhir-8{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-5{list-style-type:none}.lst-kix_5xw6kslyeabv-0>li:before{content:"\0025cf  "}ul.lst-kix_59cwpstquhir-7{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-4{list-style-type:none}ul.lst-kix_59cwpstquhir-6{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-3{list-style-type:none}.lst-kix_wcg34dhrjlda-0>li:before{content:"\0025cf  "}ul.lst-kix_59cwpstquhir-5{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-2{list-style-type:none}.lst-kix_mzdqbryq6jx5-5>li:before{content:"\0025a0  "}ul.lst-kix_iv67mwnkt0ou-8{list-style-type:none}ul.lst-kix_iv67mwnkt0ou-7{list-style-type:none}.lst-kix_wcg34dhrjlda-1>li:before{content:"\0025cb  "}ul.lst-kix_iv67mwnkt0ou-6{list-style-type:none}.lst-kix_wcg34dhrjlda-2>li:before{content:"\0025a0  "}.lst-kix_wcg34dhrjlda-4>li:before{content:"\0025cb  "}.lst-kix_wcg34dhrjlda-3>li:before{content:"\0025cf  "}.lst-kix_wcg34dhrjlda-7>li:before{content:"\0025cb  "}ul.lst-kix_l6ree99vh8ok-3{list-style-type:none}ul.lst-kix_l6ree99vh8ok-4{list-style-type:none}ul.lst-kix_l6ree99vh8ok-5{list-style-type:none}.lst-kix_wcg34dhrjlda-6>li:before{content:"\0025cf  "}ul.lst-kix_l6ree99vh8ok-6{list-style-type:none}ul.lst-kix_l6ree99vh8ok-0{list-style-type:none}ul.lst-kix_l6ree99vh8ok-1{list-style-type:none}.lst-kix_wcg34dhrjlda-5>li:before{content:"\0025a0  "}ul.lst-kix_l6ree99vh8ok-2{list-style-type:none}ul.lst-kix_l6ree99vh8ok-7{list-style-type:none}.lst-kix_m8cjl3ytkqqs-8>li:before{content:"\0025a0  "}ul.lst-kix_l6ree99vh8ok-8{list-style-type:none}.lst-kix_5xw6kslyeabv-8>li:before{content:"\0025a0  "}.lst-kix_5xw6kslyeabv-6>li:before{content:"\0025cf  "}.lst-kix_5xw6kslyeabv-7>li:before{content:"\0025cb  "}.lst-kix_m8cjl3ytkqqs-3>li:before{content:"\0025cf  "}.lst-kix_bibu5p8er7uj-3>li:before{content:"\0025cf  "}ul.lst-kix_z6cx2k85s45j-2{list-style-type:none}.lst-kix_5xw6kslyeabv-4>li:before{content:"\0025cb  "}.lst-kix_5xw6kslyeabv-5>li:before{content:"\0025a0  "}ul.lst-kix_z6cx2k85s45j-3{list-style-type:none}ul.lst-kix_z6cx2k85s45j-0{list-style-type:none}.lst-kix_bibu5p8er7uj-4>li:before{content:"\0025cb  "}ul.lst-kix_z6cx2k85s45j-1{list-style-type:none}.lst-kix_m8cjl3ytkqqs-4>li:before{content:"\0025cb  "}.lst-kix_bibu5p8er7uj-5>li:before{content:"\0025a0  "}.lst-kix_5xw6kslyeabv-1>li:before{content:"\0025cb  "}.lst-kix_m8cjl3ytkqqs-5>li:before{content:"\0025a0  "}.lst-kix_m8cjl3ytkqqs-6>li:before{content:"\0025cf  "}.lst-kix_bibu5p8er7uj-6>li:before{content:"\0025cf  "}.lst-kix_bibu5p8er7uj-8>li:before{content:"\0025a0  "}.lst-kix_5xw6kslyeabv-2>li:before{content:"\0025a0  "}.lst-kix_5xw6kslyeabv-3>li:before{content:"\0025cf  "}.lst-kix_m8cjl3ytkqqs-7>li:before{content:"\0025cb  "}.lst-kix_bibu5p8er7uj-7>li:before{content:"\0025cb  "}ul.lst-kix_tyllilqqktwa-4{list-style-type:none}ul.lst-kix_tyllilqqktwa-5{list-style-type:none}ul.lst-kix_tyllilqqktwa-2{list-style-type:none}.lst-kix_bibu5p8er7uj-2>li:before{content:"\0025a0  "}ul.lst-kix_tyllilqqktwa-3{list-style-type:none}ul.lst-kix_tyllilqqktwa-0{list-style-type:none}ul.lst-kix_tyllilqqktwa-1{list-style-type:none}.lst-kix_bibu5p8er7uj-1>li:before{content:"\0025cb  "}.lst-kix_bibu5p8er7uj-0>li:before{content:"\0025cf  "}.lst-kix_wcg34dhrjlda-8>li:before{content:"\0025a0  "}ul.lst-kix_tyllilqqktwa-8{list-style-type:none}ul.lst-kix_tyllilqqktwa-6{list-style-type:none}ul.lst-kix_tyllilqqktwa-7{list-style-type:none}.lst-kix_mzdqbryq6jx5-0>li:before{content:"\0025cf  "}.lst-kix_mzdqbryq6jx5-2>li:before{content:"\0025a0  "}.lst-kix_mzdqbryq6jx5-3>li:before{content:"\0025cf  "}.lst-kix_mzdqbryq6jx5-1>li:before{content:"\0025cb  "}.lst-kix_iv67mwnkt0ou-0>li:before{content:"\0025cf  "}.lst-kix_sxwiqachf4gx-8>li:before{content:"\0025a0  "}.lst-kix_iv67mwnkt0ou-2>li:before{content:"\0025a0  "}.lst-kix_p2i2djphr8cn-4>li:before{content:"\0025cb  "}.lst-kix_p2i2djphr8cn-8>li:before{content:"\0025a0  "}.lst-kix_y9tylpjvwis1-5>li:before{content:"\0025a0  "}.lst-kix_y9tylpjvwis1-7>li:before{content:"\0025cb  "}.lst-kix_sxwiqachf4gx-4>li:before{content:"\0025cb  "}ul.lst-kix_kmpse1je8ztd-2{list-style-type:none}ul.lst-kix_kmpse1je8ztd-1{list-style-type:none}.lst-kix_p2i2djphr8cn-2>li:before{content:"\0025a0  "}ul.lst-kix_kmpse1je8ztd-0{list-style-type:none}.lst-kix_iv67mwnkt0ou-8>li:before{content:"\0025a0  "}.lst-kix_y9tylpjvwis1-1>li:before{content:"\0025cb  "}.lst-kix_y9tylpjvwis1-3>li:before{content:"\0025cf  "}.lst-kix_sxwiqachf4gx-0>li:before{content:"\0025cf  "}.lst-kix_sxwiqachf4gx-2>li:before{content:"\0025a0  "}.lst-kix_kmpse1je8ztd-8>li:before{content:"\0025a0  "}.lst-kix_iv67mwnkt0ou-6>li:before{content:"\0025cf  "}.lst-kix_iv67mwnkt0ou-4>li:before{content:"\0025cb  "}.lst-kix_p2i2djphr8cn-6>li:before{content:"\0025cf  "}.lst-kix_239ildm03gdr-1>li:before{content:"\0025cb  "}.lst-kix_msz2m9p3d6ol-3>li:before{content:"\0025cf  "}.lst-kix_kmpse1je8ztd-2>li:before{content:"\0025a0  "}.lst-kix_cuzzt0xtb4ti-0>li:before{content:"\0025cf  "}.lst-kix_msz2m9p3d6ol-1>li:before{content:"\0025cb  "}.lst-kix_msz2m9p3d6ol-5>li:before{content:"\0025a0  "}.lst-kix_kmpse1je8ztd-0>li:before{content:"\0025cf  "}.lst-kix_kmpse1je8ztd-4>li:before{content:"\0025cb  "}.lst-kix_z6cx2k85s45j-0>li:before{content:"\0025cf  "}.lst-kix_z6cx2k85s45j-4>li:before{content:"\0025cb  "}.lst-kix_1ped30x99rba-7>li:before{content:"\0025cb  "}.lst-kix_cuzzt0xtb4ti-2>li:before{content:"\0025a0  "}.lst-kix_msz2m9p3d6ol-7>li:before{content:"\0025cb  "}.lst-kix_kmpse1je8ztd-6>li:before{content:"\0025cf  "}.lst-kix_z6cx2k85s45j-6>li:before{content:"\0025cf  "}.lst-kix_cuzzt0xtb4ti-6>li:before{content:"\0025cf  "}ul.lst-kix_kmpse1je8ztd-6{list-style-type:none}ul.lst-kix_kmpse1je8ztd-5{list-style-type:none}ul.lst-kix_kmpse1je8ztd-4{list-style-type:none}ul.lst-kix_kmpse1je8ztd-3{list-style-type:none}.lst-kix_cuzzt0xtb4ti-4>li:before{content:"\0025cb  "}.lst-kix_cuzzt0xtb4ti-8>li:before{content:"\0025a0  "}ul.lst-kix_kmpse1je8ztd-8{list-style-type:none}ul.lst-kix_kmpse1je8ztd-7{list-style-type:none}.lst-kix_sxwiqachf4gx-6>li:before{content:"\0025cf  "}.lst-kix_z6cx2k85s45j-2>li:before{content:"\0025a0  "}ul.lst-kix_m8cjl3ytkqqs-5{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-6{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-7{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-8{list-style-type:none}.lst-kix_l6ree99vh8ok-2>li:before{content:"\0025a0  "}.lst-kix_l6ree99vh8ok-6>li:before{content:"\0025cf  "}.lst-kix_l6ree99vh8ok-0>li:before{content:"\0025cf  "}.lst-kix_l6ree99vh8ok-8>li:before{content:"\0025a0  "}.lst-kix_1ped30x99rba-3>li:before{content:"\0025cf  "}.lst-kix_m8cjl3ytkqqs-2>li:before{content:"\0025a0  "}.lst-kix_tyllilqqktwa-8>li:before{content:"\0025a0  "}.lst-kix_1ped30x99rba-1>li:before{content:"\0025cb  "}.lst-kix_1ped30x99rba-5>li:before{content:"\0025a0  "}.lst-kix_m8cjl3ytkqqs-0>li:before{content:"  "}.lst-kix_z6cx2k85s45j-8>li:before{content:"\0025a0  "}.lst-kix_59cwpstquhir-0>li:before{content:"\0025cf  "}.lst-kix_l6ree99vh8ok-4>li:before{content:"\0025cb  "}ul.lst-kix_wcg34dhrjlda-7{list-style-type:none}ul.lst-kix_wcg34dhrjlda-6{list-style-type:none}ul.lst-kix_1ped30x99rba-0{list-style-type:none}ul.lst-kix_wcg34dhrjlda-5{list-style-type:none}.lst-kix_tyllilqqktwa-0>li:before{content:"\0025cf  "}ul.lst-kix_wcg34dhrjlda-4{list-style-type:none}.lst-kix_59cwpstquhir-2>li:before{content:"\0025a0  "}.lst-kix_59cwpstquhir-4>li:before{content:"\0025cb  "}ul.lst-kix_wcg34dhrjlda-3{list-style-type:none}ul.lst-kix_1ped30x99rba-3{list-style-type:none}ul.lst-kix_wcg34dhrjlda-2{list-style-type:none}ul.lst-kix_1ped30x99rba-4{list-style-type:none}ul.lst-kix_wcg34dhrjlda-1{list-style-type:none}ul.lst-kix_1ped30x99rba-1{list-style-type:none}ul.lst-kix_wcg34dhrjlda-0{list-style-type:none}ul.lst-kix_1ped30x99rba-2{list-style-type:none}.lst-kix_239ildm03gdr-3>li:before{content:"\0025cf  "}ul.lst-kix_1ped30x99rba-7{list-style-type:none}ul.lst-kix_1ped30x99rba-8{list-style-type:none}ul.lst-kix_1ped30x99rba-5{list-style-type:none}ul.lst-kix_1ped30x99rba-6{list-style-type:none}.lst-kix_tyllilqqktwa-6>li:before{content:"\0025cf  "}ul.lst-kix_wcg34dhrjlda-8{list-style-type:none}.lst-kix_239ildm03gdr-5>li:before{content:"\0025a0  "}.lst-kix_239ildm03gdr-7>li:before{content:"\0025cb  "}ul.lst-kix_p2i2djphr8cn-4{list-style-type:none}ul.lst-kix_p2i2djphr8cn-3{list-style-type:none}.lst-kix_tyllilqqktwa-4>li:before{content:"\0025cb  "}ul.lst-kix_p2i2djphr8cn-6{list-style-type:none}ul.lst-kix_p2i2djphr8cn-5{list-style-type:none}.lst-kix_59cwpstquhir-6>li:before{content:"\0025cf  "}.lst-kix_59cwpstquhir-8>li:before{content:"\0025a0  "}ul.lst-kix_m8cjl3ytkqqs-0{list-style-type:none}ul.lst-kix_p2i2djphr8cn-0{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-1{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-2{list-style-type:none}.lst-kix_tyllilqqktwa-2>li:before{content:"\0025a0  "}ul.lst-kix_p2i2djphr8cn-2{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-3{list-style-type:none}ul.lst-kix_p2i2djphr8cn-1{list-style-type:none}ul.lst-kix_m8cjl3ytkqqs-4{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-7{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-6{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-5{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-4{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-3{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-2{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-1{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-0{list-style-type:none}ul.lst-kix_cuzzt0xtb4ti-8{list-style-type:none}ul.lst-kix_y9tylpjvwis1-8{list-style-type:none}ul.lst-kix_y9tylpjvwis1-6{list-style-type:none}ul.lst-kix_y9tylpjvwis1-7{list-style-type:none}ul.lst-kix_y9tylpjvwis1-4{list-style-type:none}ul.lst-kix_y9tylpjvwis1-5{list-style-type:none}ul.lst-kix_y9tylpjvwis1-2{list-style-type:none}ul.lst-kix_y9tylpjvwis1-3{list-style-type:none}ul.lst-kix_y9tylpjvwis1-0{list-style-type:none}ul.lst-kix_y9tylpjvwis1-1{list-style-type:none}.lst-kix_uhbp3sqigu8a-8>li:before{content:"\0025a0  "}.lst-kix_uhbp3sqigu8a-0>li:before{content:"\0025cf  "}.lst-kix_uhbp3sqigu8a-1>li:before{content:"\0025cb  "}.lst-kix_uhbp3sqigu8a-2>li:before{content:"\0025a0  "}.lst-kix_uhbp3sqigu8a-4>li:before{content:"\0025cb  "}.lst-kix_uhbp3sqigu8a-3>li:before{content:"\0025cf  "}.lst-kix_uhbp3sqigu8a-5>li:before{content:"\0025a0  "}.lst-kix_p2i2djphr8cn-1>li:before{content:"\0025cb  "}.lst-kix_p2i2djphr8cn-0>li:before{content:"\0025cf  "}.lst-kix_uhbp3sqigu8a-7>li:before{content:"\0025cb  "}.lst-kix_uhbp3sqigu8a-6>li:before{content:"\0025cf  "}.lst-kix_p2i2djphr8cn-7>li:before{content:"\0025cb  "}ul.lst-kix_5xw6kslyeabv-1{list-style-type:none}ul.lst-kix_5xw6kslyeabv-0{list-style-type:none}.lst-kix_iv67mwnkt0ou-1>li:before{content:"\0025cb  "}.lst-kix_p2i2djphr8cn-5>li:before{content:"\0025a0  "}.lst-kix_y9tylpjvwis1-8>li:before{content:"\0025a0  "}.lst-kix_iv67mwnkt0ou-3>li:before{content:"\0025cf  "}.lst-kix_p2i2djphr8cn-3>li:before{content:"\0025cf  "}ul.lst-kix_msz2m9p3d6ol-0{list-style-type:none}.lst-kix_y9tylpjvwis1-6>li:before{content:"\0025cf  "}ul.lst-kix_5xw6kslyeabv-8{list-style-type:none}ul.lst-kix_5xw6kslyeabv-7{list-style-type:none}ul.lst-kix_5xw6kslyeabv-6{list-style-type:none}ul.lst-kix_5xw6kslyeabv-5{list-style-type:none}ul.lst-kix_msz2m9p3d6ol-4{list-style-type:none}ul.lst-kix_5xw6kslyeabv-4{list-style-type:none}ul.lst-kix_msz2m9p3d6ol-3{list-style-type:none}ul.lst-kix_5xw6kslyeabv-3{list-style-type:none}ul.lst-kix_msz2m9p3d6ol-2{list-style-type:none}ul.lst-kix_5xw6kslyeabv-2{list-style-type:none}.lst-kix_sxwiqachf4gx-3>li:before{content:"\0025cf  "}ul.lst-kix_msz2m9p3d6ol-1{list-style-type:none}.lst-kix_y9tylpjvwis1-2>li:before{content:"\0025a0  "}.lst-kix_y9tylpjvwis1-0>li:before{content:"\0025cf  "}.lst-kix_y9tylpjvwis1-4>li:before{content:"\0025cb  "}.lst-kix_iv67mwnkt0ou-7>li:before{content:"\0025cb  "}.lst-kix_sxwiqachf4gx-1>li:before{content:"\0025cb  "}.lst-kix_iv67mwnkt0ou-5>li:before{content:"\0025a0  "}.lst-kix_msz2m9p3d6ol-2>li:before{content:"\0025a0  "}.lst-kix_msz2m9p3d6ol-4>li:before{content:"\0025cb  "}.lst-kix_kmpse1je8ztd-1>li:before{content:"\0025cb  "}.lst-kix_kmpse1je8ztd-3>li:before{content:"\0025cf  "}.lst-kix_z6cx2k85s45j-1>li:before{content:"\0025cb  "}.lst-kix_z6cx2k85s45j-3>li:before{content:"\0025cf  "}.lst-kix_239ildm03gdr-0>li:before{content:"\0025cf  "}.lst-kix_1ped30x99rba-8>li:before{content:"\0025a0  "}.lst-kix_1ped30x99rba-6>li:before{content:"\0025cf  "}.lst-kix_cuzzt0xtb4ti-1>li:before{content:"\0025cb  "}.lst-kix_cuzzt0xtb4ti-3>li:before{content:"\0025cf  "}.lst-kix_msz2m9p3d6ol-0>li:before{content:"  "}.lst-kix_msz2m9p3d6ol-6>li:before{content:"\0025cf  "}.lst-kix_msz2m9p3d6ol-8>li:before{content:"\0025a0  "}.lst-kix_kmpse1je8ztd-5>li:before{content:"\0025a0  "}.lst-kix_kmpse1je8ztd-7>li:before{content:"\0025cb  "}.lst-kix_z6cx2k85s45j-5>li:before{content:"\0025a0  "}.lst-kix_z6cx2k85s45j-7>li:before{content:"\0025cb  "}ul.lst-kix_msz2m9p3d6ol-8{list-style-type:none}ul.lst-kix_msz2m9p3d6ol-7{list-style-type:none}.lst-kix_cuzzt0xtb4ti-5>li:before{content:"\0025a0  "}.lst-kix_cuzzt0xtb4ti-7>li:before{content:"\0025cb  "}ul.lst-kix_msz2m9p3d6ol-6{list-style-type:none}ul.lst-kix_msz2m9p3d6ol-5{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-8{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-7{list-style-type:none}.lst-kix_sxwiqachf4gx-5>li:before{content:"\0025a0  "}ul.lst-kix_mzdqbryq6jx5-6{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-5{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-4{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-3{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-2{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-1{list-style-type:none}ul.lst-kix_mzdqbryq6jx5-0{list-style-type:none}.lst-kix_sxwiqachf4gx-7>li:before{content:"\0025cb  "}.lst-kix_l6ree99vh8ok-3>li:before{content:"\0025cf  "}ul.lst-kix_239ildm03gdr-2{list-style-type:none}ul.lst-kix_239ildm03gdr-1{list-style-type:none}ul.lst-kix_239ildm03gdr-0{list-style-type:none}.lst-kix_l6ree99vh8ok-7>li:before{content:"\0025cb  "}.lst-kix_1ped30x99rba-0>li:before{content:"\0025cf  "}ul.lst-kix_z6cx2k85s45j-8{list-style-type:none}ul.lst-kix_bibu5p8er7uj-7{list-style-type:none}ul.lst-kix_z6cx2k85s45j-6{list-style-type:none}.lst-kix_l6ree99vh8ok-1>li:before{content:"\0025cb  "}ul.lst-kix_bibu5p8er7uj-8{list-style-type:none}ul.lst-kix_z6cx2k85s45j-7{list-style-type:none}ul.lst-kix_bibu5p8er7uj-5{list-style-type:none}ul.lst-kix_z6cx2k85s45j-4{list-style-type:none}ul.lst-kix_bibu5p8er7uj-6{list-style-type:none}ul.lst-kix_z6cx2k85s45j-5{list-style-type:none}.lst-kix_1ped30x99rba-2>li:before{content:"\0025a0  "}.lst-kix_1ped30x99rba-4>li:before{content:"\0025cb  "}.lst-kix_m8cjl3ytkqqs-1>li:before{content:"\0025cb  "}ul.lst-kix_239ildm03gdr-6{list-style-type:none}ul.lst-kix_239ildm03gdr-5{list-style-type:none}ul.lst-kix_239ildm03gdr-4{list-style-type:none}ul.lst-kix_239ildm03gdr-3{list-style-type:none}.lst-kix_l6ree99vh8ok-5>li:before{content:"\0025a0  "}ul.lst-kix_239ildm03gdr-8{list-style-type:none}ul.lst-kix_239ildm03gdr-7{list-style-type:none}.lst-kix_tyllilqqktwa-1>li:before{content:"\0025cb  "}.lst-kix_239ildm03gdr-2>li:before{content:"\0025a0  "}.lst-kix_59cwpstquhir-1>li:before{content:"\0025cb  "}.lst-kix_59cwpstquhir-5>li:before{content:"\0025a0  "}ul.lst-kix_uhbp3sqigu8a-0{list-style-type:none}.lst-kix_tyllilqqktwa-5>li:before{content:"\0025a0  "}.lst-kix_239ildm03gdr-4>li:before{content:"\0025cb  "}.lst-kix_239ildm03gdr-6>li:before{content:"\0025cf  "}ul.lst-kix_sxwiqachf4gx-8{list-style-type:none}.lst-kix_tyllilqqktwa-7>li:before{content:"\0025cb  "}ul.lst-kix_sxwiqachf4gx-7{list-style-type:none}ul.lst-kix_sxwiqachf4gx-6{list-style-type:none}.lst-kix_59cwpstquhir-3>li:before{content:"\0025cf  "}ul.lst-kix_bibu5p8er7uj-3{list-style-type:none}ul.lst-kix_sxwiqachf4gx-5{list-style-type:none}ul.lst-kix_bibu5p8er7uj-4{list-style-type:none}ul.lst-kix_sxwiqachf4gx-4{list-style-type:none}ul.lst-kix_bibu5p8er7uj-1{list-style-type:none}ul.lst-kix_sxwiqachf4gx-3{list-style-type:none}ul.lst-kix_bibu5p8er7uj-2{list-style-type:none}ul.lst-kix_sxwiqachf4gx-2{list-style-type:none}.lst-kix_239ildm03gdr-8>li:before{content:"\0025a0  "}ul.lst-kix_sxwiqachf4gx-1{list-style-type:none}ul.lst-kix_bibu5p8er7uj-0{list-style-type:none}ul.lst-kix_sxwiqachf4gx-0{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-1{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-2{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-3{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-4{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-5{list-style-type:none}.lst-kix_tyllilqqktwa-3>li:before{content:"\0025cf  "}ul.lst-kix_uhbp3sqigu8a-6{list-style-type:none}ul.lst-kix_uhbp3sqigu8a-7{list-style-type:none}.lst-kix_59cwpstquhir-7>li:before{content:"\0025cb  "}ul.lst-kix_uhbp3sqigu8a-8{list-style-type:none}ol{margin:0;padding:0}table td,table th{padding:0}.c17{border-right-style:solid;padding:5pt 5pt 5pt 5pt;border-bottom-color:#000000;border-top-width:0pt;border-right-width:0pt;border-left-color:#000000;vertical-align:top;border-right-color:#000000;border-left-width:0pt;border-top-style:solid;background-color:#f6f6ae;border-left-style:solid;border-bottom-width:0pt;width:697.9pt;border-top-color:#000000;border-bottom-style:solid}.c5{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c28{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:16pt;font-family:"Arial";font-style:normal}.c12{padding-top:16pt;padding-bottom:4pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c31{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:20pt;font-family:"Arial";font-style:normal}.c30{padding-top:18pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c44{padding-top:20pt;padding-bottom:6pt;line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.c2{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left;height:11pt}.c14{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c25{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center;height:11pt}.c1{margin-left:108pt;padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c13{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Consolas";font-style:normal}.c27{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:center}.c7{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c0{background-color:#f6f6ae;font-size:10pt;font-family:"Consolas";color:#3e5915;font-weight:400}.c3{background-color:#f6f6ae;font-size:10pt;font-family:"Consolas";color:#3e5915;font-weight:700}.c10{background-color:#f6f6ae;font-size:10pt;font-family:"Consolas";color:#e60415;font-weight:400}.c38{font-weight:400;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c9{padding-top:0pt;padding-bottom:0pt;line-height:1.15;text-align:left}.c6{border-spacing:0;border-collapse:collapse;margin-right:auto}.c33{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c36{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#0000ff;text-decoration:underline}.c18{background-color:#f6f6ae;font-family:"Consolas";color:#2c009f;font-weight:400}.c15{background-color:#f6f6ae;font-size:10pt;font-family:"Consolas";color:#005599}.c37{color:#434343;font-weight:400;font-size:14pt;font-family:"Arial"}.c40{background-color:#ffffff;max-width:697.9pt;padding:72pt 72pt 72pt 72pt}.c24{background-color:#f6f6ae;font-family:"Consolas";color:#2c009f}.c32{text-decoration:none;vertical-align:baseline;font-style:normal}.c21{font-weight:400;font-family:"Consolas"}.c19{color:inherit;text-decoration:inherit}.c42{color:#000000;font-size:11pt}.c22{padding:0;margin:0}.c43{font-family:"Consolas"}.c16{font-size:10pt}.c4{font-weight:700}.c26{height:0pt}.c20{padding-left:0pt}.c34{margin-left:108pt}.c8{margin-left:36pt}.c11{margin-left:72pt}.c39{margin-left:252pt}.c41{margin-left:216pt}.c23{margin-left:144pt}.c35{height:14pt}.c45{margin-left:288pt}.c29{margin-left:180pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head>
<body class="c40">
    <div>

        <!-- Navigation -->
  <nav class="bg-dark navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
        <div class="container">
          <a class="navbar-brand" href="../index.html">T-CODE</a>
          <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
            Menu
            <i class="fas fa-bars"></i>
          </button>
          <div class="collapse navbar-collapse" id="navbarResponsive">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item">
                  <div class="dropdown"> 
                      <button type="button" class="btn text-white dropdown-toggle " data-toggle="dropdown">Python</button>
                      <div class="dropdown-menu bg-dark">
                        <a class="dropdown-item border border-light bg-dark text-white" href="python/pythonbasic.html">Python Basic</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="python/django.html">Django Framework</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="python/flask.html">Flask Framework</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="python/ML_Basic.pdf">Machine Learning Basic</a>
                      </div>
                  </div>
    
              </li>
              <li class="nav-item">
                  <div class="dropdown"> 
                      <button type="button" class="btn text-white dropdown-toggle " data-toggle="dropdown">Java</button>
                      <div class="dropdown-menu bg-dark">
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 1</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 2</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 3</a>
                      </div>
                  </div>
              </li>
              <li class="nav-item">
                  <div class="dropdown"> 
                      <button type="button" class="btn text-white dropdown-toggle " data-toggle="dropdown">C++</button>
                      <div class="dropdown-menu bg-dark">
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 1</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 2</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 3</a>
                      </div>
                  </div>
              </li>
              <li class="nav-item">
                  <div class="dropdown"> 
                      <button type="button" class="btn text-white dropdown-toggle " data-toggle="dropdown">C#</button>
                      <div class="dropdown-menu bg-dark">
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 1</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 2</a>
                        <a class="dropdown-item border border-light bg-dark text-white" href="#">Link 3</a>
                      </div>
                  </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>        



        <p class="c2">
            <span class="c5"></span>
        </p>
    </div>
    <h1 class="c44" id="h.sxipl54z4sho"><span class="c31">Giới thiệu</span></h1><p class="c7"><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://flask.pocoo.org/&amp;sa=D&amp;ust=1550421914823000">Flask</a></span><span class="c5">&nbsp;là một microframework cho phép phát triển webservice trên Python một cách đơn giản và nhanh chóng.</span></p><p class="c2"><span class="c5"></span></p><h1 class="c44" id="h.6fu1k08c06ur"><span class="c31">Cài đặt </span></h1><h2 class="c30" id="h.mg1x6jebw5tl"><span class="c28">Cài đặt python</span></h2><ul class="c22 lst-kix_239ildm03gdr-0 start"><li class="c7 c20 c8"><span>Download và cài đặt python tại :</span><span><a class="c19" href="https://www.google.com/url?q=https://www.python.org/downloads/&amp;sa=D&amp;ust=1550421914824000">&nbsp;</a></span><span class="c36"><a class="c19" href="https://www.google.com/url?q=https://www.python.org/downloads/&amp;sa=D&amp;ust=1550421914825000">https://www.python.org/downloads/</a></span></li></ul><p class="c2 c8"><span class="c36 c38"><a class="c19" href="https://www.google.com/url?q=https://www.python.org/downloads/&amp;sa=D&amp;ust=1550421914825000"></a></span></p><ul class="c22 lst-kix_239ildm03gdr-0"><li class="c7 c20 c8"><span>Lưu ý khi cài đặt: Tại màn hình cửa sổ đầu tiên khi chạy chương trình cài đăt, nên chọn option “</span><span class="c4">Add Python 3.x to PATH</span><span class="c5">”, để thuận lợi cho việc chạy python từ cửa sổ cmd sau khi cài đặt</span></li></ul><p class="c2 c8"><span class="c5"></span></p><p class="c7 c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 664.00px; height: 406.00px;"><img alt="" src="./flask_files/image3.png" style="width: 664.00px; height: 406.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c5"></span></p><p class="c7 c29"><span class="c14">Thêm lựa chọn “Add Python to PATH” khi cài đặt Python</span></p><h2 class="c30" id="h.a77zfruvs5bq"><span class="c28">Cài đặt thư viện Flask</span></h2><p class="c7"><span class="c5">Sử dụng pip để cài đặt thư viện Flask và các thư viện liên quan. Từ cửa sổ cmd, gõ lệnh sau để cài đặt Flask:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span class="c13">pip install flask flask_sqlalchemy</span></p><p class="c2 c23"><span class="c13"></span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 931.00px; height: 485.33px;"><img alt="" src="./flask_files/image9.png" style="width: 931.00px; height: 485.33px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c25 c8"><span class="c5"></span></p><p class="c7 c39"><span class="c14">Cài đặt flask bằng pip từ cửa sổ cmd</span></p><p class="c25 c11"><span class="c14"></span></p><h1 class="c44" id="h.yewjpeji2i3n"><span class="c31">Phát triển ứng dụng web với flask</span></h1><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.1xqueckipfrd"><span class="c28">Xây dựng một ứng dụng đơn giản</span></h2><p class="c7"><span>Tạo một file với tên </span><span class="c21">app.py</span><span class="c5">&nbsp;với nội dung sau và chạy chương trình:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.8161e73a28c7c6fa9722b47c6597548293de1750"></a><a id="t.0"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_world</span><span class="c0">():<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">'Hello World'</span><span class="c0"><br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; &nbsp;app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Khi ứng dụng chạy, server sẽ lắng nghe ở cổng mặc định là 5000. Truy nhập vào địa chỉ </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://localhost:5000&amp;sa=D&amp;ust=1550421914830000">http://localhost:5000</a></span><span class="c5">, chúng ta sẽ thấy kết quả ứng dụng trả về:</span></p><p class="c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 618.00px; height: 292.00px;"><img alt="" src="./flask_files/image11.png" style="width: 618.00px; height: 292.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Kết quả trả về khi truy nhập trang chủ ứng dụng tại http://localhost:5000</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ở chương trình ví dụ trên, lệnh khởi động server trong hàm main là:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span class="c13">app.run()</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Với lệnh mặc định này, server sẽ lắng nghe ở địa chỉ 127.0.0.1 , cổng 5000 (cổng mặc định của flask). Để thay đổi cấu hình server, có thể truyền vào lệnh </span><span class="c21">run</span><span class="c5">&nbsp;này các tham số sau:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_l6ree99vh8ok-0 start"><li class="c7 c20 c8"><span class="c21">host</span><span class="c5">&nbsp;: Thay đổi ip mà server sẽ lắng nghe</span></li><li class="c7 c8 c20"><span class="c21">port</span><span class="c5">&nbsp;: Thay đổi cổng mà server sẽ lắng nghe</span></li><li class="c7 c20 c8"><span class="c21">debug</span><span class="c5">&nbsp;: True/False. Nếu giá trị này bằng True thì mỗi khi sửa file app.py và lưu lại, server sẽ tự khởi động lại</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ví dụ:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span class="c13">app.run(host='0.0.0.0', port=8080, debug=True)</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.2e5nv1x9ri89"><span class="c28">Khai báo địa chỉ url và phương thức cho endpoint</span></h2><h3 class="c12" id="h.xeg2u9vt5xb2"><span class="c37 c32">Khai báo url cho endpoint</span></h3><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span class="c13">@app.route('/hello')</span></p><p class="c7 c23"><span class="c13">def hello_world():</span></p><p class="c7 c23"><span class="c13">&nbsp; &nbsp; return 'Hello World'</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7"><span class="c5">Khi chạy ứng dụng, endpoint sẽ có url là http://&lt;ip:port&gt;/hello</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.eocz4c7hc5dd"><span class="c37 c32">Khai báo phương thức cho endpoint:</span></h3><p class="c7"><span class="c5">Theo mặc định, phương thức của endpoint sẽ là GET. Để chỉ định các phương thức mà endpoint sẽ hỗ trợ, cần khai báo danh sách các phương thức này vào cuối annotation </span></p><p class="c7"><span class="c21">@app.route</span><span class="c5">&nbsp;như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.63317f90b4a682585b42cfb0a360cf6ad120ca03"></a><a id="t.1"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, request<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/hello', methods = ['POST', 'GET'])</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_world</span><span class="c0">():<br> &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;request.method == </span><span class="c18 c16">'POST'</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">'Hello from POST method'</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">'Hello from GET method'</span><span class="c0"><br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; &nbsp;app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.4l5kzvt2gymr"><span class="c28">Lấy tham số từ request</span></h2><p class="c7"><span>Với GET method, các tham số do client gửi lên server được lấy qua </span><span class="c21">request.args</span><span>, còn với POST method, các tham số lấy từ </span><span class="c21">request.form </span><span>nếu dữ liệu gửi lên ở dạng </span><span class="c21">form-data</span><span>, hoặc </span><span class="c21">request.json</span><span>&nbsp;nếu dữ liệu gửi lên ở dạng </span><span class="c21">JSON</span><span>. Ngoài ra nếu form ở dạng multi-part thì còn có thêm </span><span class="c21">request.files</span><span>&nbsp;chứa các file upload lên từ client.</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.382a245804cbfb6e44cb3cadde9016c1a3c63346"></a><a id="t.2"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, request<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/hello', methods = ['POST', 'GET'])</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_world</span><span class="c0">():<br> &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;request.method == </span><span class="c18 c16">'POST'</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c18 c16">'name'</span><span class="c0">&nbsp;</span><span class="c15 c4">in</span><span class="c0">&nbsp;request.form:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;name = request.form[</span><span class="c18 c16">'name'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">f'Hello </span><span class="c0">{name}</span><span class="c18 c16">&nbsp;from POST method (form-data)'</span><span class="c0"><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">elif</span><span class="c0">&nbsp;</span><span class="c18 c16">'name'</span><span class="c0">&nbsp;</span><span class="c15 c4">in</span><span class="c0">&nbsp;request.json:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;name = request.json[</span><span class="c18 c16">'name'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">f'Hello </span><span class="c0">{name}</span><span class="c16 c18">&nbsp;from POST method (JSON)'</span><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">'Hello from POST method'</span><span class="c0"><br> &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;name = request.args.get(</span><span class="c18 c16">'name'</span><span class="c0">, </span><span class="c18 c16">''</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">f'Hello </span><span class="c0">{name}</span><span class="c18 c16">&nbsp;from GET method'</span><span class="c0"><br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; &nbsp;app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c13"></span></p><p class="c27"><span class="c14">Cách lấy tham số trong GET và POST method</span></p><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.qtm92bwc68pw"><span class="c28">Mapping tham số trong url</span></h2><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ngoài cách lấy tham số từ request, có thể mapping tham số trong khai báo url:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.70bcc2d757158d4345cc59d72e0464ead234603a"></a><a id="t.3"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/hello/&lt;name&gt;')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_name</span><span class="c0">(name):<br> &nbsp; </span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">f'Hello </span><span class="c0">{name}</span><span class="c18 c16">'</span><span class="c0"><br><br></span><span class="c10">@app.route('/student/&lt;int:studentId&gt;')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">getStudent</span><span class="c0">(studentId):<br> &nbsp; </span><span class="c15 c4">return</span><span class="c0">&nbsp;</span><span class="c18 c16">f'Student </span><span class="c0">{studentId}</span><span class="c18 c16">'</span><span class="c0"><br> &nbsp; <br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run(debug = </span><span class="c15 c4">True</span><span class="c0">)</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.4f3mo2c5knou"><span class="c28">Truy nhập static files</span></h2><p class="c7"><span>Các file static (css, js, jpg, png …) có thể được truy nhập qua một folder có tên là </span><span class="c21">static</span><span>&nbsp;đặc ngang hàng với file </span><span class="c21">app.py</span><span class="c5">. Ví dụ:</span></p><p class="c2"><span class="c5"></span></p><p class="c1"><span class="c13">app.py</span></p><p class="c1"><span class="c13">static/</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; test.jpg</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7"><span class="c5">Trong trường hợp này, link tời file test.jpg là http://localhost:5000/static/test.jpg</span></p><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.suda7j3dkcch"><span class="c28">Sử dụng template</span></h2><p class="c7"><span>Mỗi endpoint phải trả về một giá trị string chứa nội dung của trang web cần hiển thị. Tuy nhiên thực tế , hầu như không ứng dụng nào trả về giá trị string này trong file app.py, mà sẽ sử dụng thông qua các template. Các file template này thường có tên mở rộng là html và đặt trong thư mục </span><span class="c21">templates</span><span>&nbsp;ngang hàng với file </span><span class="c21">app.py</span><span class="c5">:</span></p><p class="c2"><span class="c5"></span></p><p class="c1"><span class="c13">app.py</span></p><p class="c1"><span class="c13">templates/</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; index.html</span></p><p class="c2 c8"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Chương trình sau minh họa một ví dụ sử dụng template đơn giản:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.3d07bc305ec81b9e8d64ce8a09ce52e2e8d90127"></a><a id="t.4"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, render_template<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello</span><span class="c0">():<br> &nbsp; </span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">'index.html'</span><span class="c0">)<br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">app.py</span></p><p class="c25"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.72724c0b3a5402be5c9ad3a0a82b189744f19861"></a><a id="t.5"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;</span><span class="c3">html</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">body</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">b</span><span class="c0">&gt;Hello, world!&lt;/</span><span class="c3">b</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">body</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">html</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">templates/index.html</span></p><p class="c25"><span class="c13"></span></p><h3 class="c12 c35" id="h.liu6ogur0l3h"><span class="c37 c32"></span></h3><h3 class="c12" id="h.guwkon1jb9xq"><span class="c37 c32">Truyền biến xuống template</span></h3><p class="c7"><span class="c5">Thông thường với các ứng dụng web, các biến dữ liệu sẽ được tính toán trong hàm xử lý (Controller), sau đó sẽ truyền xuống cho template. Ví dụ sau minh họa cách flask truyền biến xuống template:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.2dc7afb532df946e2a3873f5bc23d80a0452d530"></a><a id="t.6"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, render_template<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/hello/&lt;user&gt;')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_name</span><span class="c0">(user):<br> &nbsp; </span><span class="c4 c15">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">'index.html'</span><span class="c0">, user=user)<br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c15 c4 c32"></span></p><p class="c27"><span class="c16">File </span><span class="c13">app.py</span></p><p class="c25"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.9adc71f5497963715b447d501be03c367a19da02"></a><a id="t.7"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;</span><span class="c3">html</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">body</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">b</span><span class="c0">&gt;Hello, {{ user }}!&lt;/</span><span class="c3">b</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">body</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">html</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">templates/index.html</span></p><p class="c25"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ở template, các biến từ hàm controller gửi sang sẽ được đặt trong kí hiệu {{ }}</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12 c35" id="h.1gvb90puece2"><span class="c37 c32"></span></h3><h2 class="c30" id="h.xhmjxgrg9oeh"><span class="c28">Redirect và error</span></h2><p class="c7"><span>Trong trường hợp đang ở hàm xử lý của một endpoint mà chúng ta muốn chuyển sang một endpoint khác thì có thể dùng hàm </span><span class="c43 c4">redirect</span><span>. Hàm này nhận tham số là url cần chuyển hướng tới. Tuy nhiên, có thể dùng hàm </span><span class="c43 c4">urlfor</span><span>&nbsp;và truyền vào tên hàm xử lý của endpoint cần chuyển hướng tới. Trong trường hợp xảy ra lỗi và chúng ta muốn thoát ngay khỏi hàm xử lý và trả về lỗi luôn thì có thể dùng hàm </span><span class="c43 c4">abort</span><span class="c5">.</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ví dụ sau minh họa cách dùng các hàm trên. </span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.297034b2f85690be5c4ab2b3fa1ce358e652fcc0"></a><a id="t.8"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, request, render_template, redirect, url_for, abort<br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/hello/&lt;user&gt;')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">hello_name</span><span class="c0">(user):<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">'index.html'</span><span class="c0">, user=user)<br><br></span><span class="c10">@app.route('/login', methods=['GET', 'POST'])</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c16 c4 c24">login</span><span class="c0">():<br> &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;request.method == </span><span class="c18 c16">'POST'</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;user = request.form.get(</span><span class="c18 c16">'user'</span><span class="c0">, </span><span class="c18 c16">''</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp;password = request.form.get(</span><span class="c18 c16">'password'</span><span class="c0">, </span><span class="c18 c16">''</span><span class="c0">)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;user == </span><span class="c18 c16">'admin'</span><span class="c0">&nbsp;</span><span class="c15 c4">and</span><span class="c0">&nbsp;password == </span><span class="c18 c16">'password'</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;redirect(url_for(</span><span class="c18 c16">'hello_name'</span><span class="c0">,user=user))<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;abort(401)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">'login.html'</span><span class="c0">)<br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">app.py</span></p><p class="c25"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.e6ba4aaebff7201f8009a0a198b91f7253d88acd"></a><a id="t.9"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;</span><span class="c3">form</span><span class="c0">&nbsp;method=</span><span class="c18 c16">'post'</span><span class="c0">&gt;<br> &nbsp; &nbsp;Username : &lt;</span><span class="c3">input</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'user'</span><span class="c0">&gt; &lt;</span><span class="c3">br</span><span class="c0">&gt;<br> &nbsp; &nbsp;Password : &lt;</span><span class="c3">input</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'password'</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'password'</span><span class="c0">&gt; &lt;</span><span class="c3">br</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'submit'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'Login'</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">form</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">templates/login.html</span></p><p class="c25"><span class="c13"></span></p><p class="c25"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.9adc71f5497963715b447d501be03c367a19da02"></a><a id="t.10"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;</span><span class="c3">html</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">body</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">b</span><span class="c0">&gt;Hello, {{ user }}!&lt;/</span><span class="c3">b</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">body</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">html</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">templates/index.html</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Chạy ứng dụng, truy nhập vào link </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://localhost:5000/login&amp;sa=D&amp;ust=1550421914861000">http://localhost:5000/login</a></span><span class="c5">&nbsp;sẽ xuất hiện màn hình đăng nhập như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 376.00px; height: 153.00px;"><img alt="" src="./flask_files/image5.png" style="width: 376.00px; height: 153.00px; margin-left: -5.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Màn hình đăng nhập http://localhost:5000/login</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Nếu username/pasword nhập vào là "admin"/"password" thì chương trình sẽ redirect sang trang thành công</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 424.00px; height: 163.00px;"><img alt="" src="./flask_files/image14.png" style="width: 424.00px; height: 163.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Redirect sang trang mới sau khi đăng nhập thành công</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Nếu nhập username/password khác giá trị ở trên thì sẽ xuất hiện màn hình lỗi 401</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 558.00px; height: 193.00px;"><img alt="" src="./flask_files/image7.png" style="width: 558.00px; height: 193.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Màn hình lỗi 401 khi nhập sai username/password</span></p><h2 class="c30" id="h.sk5nhbedvsdr"><span class="c28">Truy nhập database với flask_sqlalchemy</span></h2><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Flask_sqlalchemy là thư viện ORM cho phép làm việc với nhiều database khác nhau một cách đơn giản và thuận tiện.</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.7ac9cwcqslon"><span class="c37 c32">Khai báo model với flask_sqlalchemy</span></h3><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.2dbdd8e4e2b49dd1a87d17334e8a9b93314d0911"></a><a id="t.11"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;flask_sqlalchemy </span><span class="c15 c4">import</span><span class="c0">&nbsp;SQLAlchemy<br><br>app = Flask(__name__)<br>app.config[</span><span class="c18 c16">'SQLALCHEMY_DATABASE_URI'</span><span class="c0">] = </span><span class="c18 c16">'sqlite:///students.db'</span><span class="c0"><br>db = SQLAlchemy(app)<br><br><br></span><span class="c15 c4">class</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">Student</span><span class="c0">(db.Model):<br> &nbsp; &nbsp;id = db.Column(db.Integer, primary_key = </span><span class="c15 c4">True</span><span class="c0">)<br> &nbsp; &nbsp;studentNo = db.Column(</span><span class="c18 c16">'student_no'</span><span class="c0">, db.String(20), unique=</span><span class="c15 c4">True</span><span class="c0">)<br> &nbsp; &nbsp;studentName = db.Column(</span><span class="c18 c16">'student_name'</span><span class="c0">, db.String(50))<br> &nbsp; &nbsp;address = db.Column(</span><span class="c18 c16">'address'</span><span class="c0">, db.String(50))<br> &nbsp; <br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">__init__</span><span class="c0">(self, studentNo, studentName, address):<br> &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo = studentNo<br> &nbsp; &nbsp; &nbsp; &nbsp;self.studentName = studentName<br> &nbsp; &nbsp; &nbsp; &nbsp;self.address = address</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">app.py</span></p><p class="c25"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ở file ví dụ trên, chúng ta khai báo một model Student với các trường:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_y9tylpjvwis1-0 start"><li class="c7 c20 c11"><span class="c5">Id : INT, PRIMARY KEY</span></li><li class="c7 c20 c11"><span class="c5">studentNo : VARCHAR(20), UNIQUE</span></li><li class="c7 c20 c11"><span class="c5">studentName : VARCHAR(50)</span></li><li class="c7 c20 c11"><span class="c5">address : VARCHAR(100)</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c7"><span>Cơ sở dữ liệu sử dụng được khai báo trong biến </span><span class="c21">app.config['SQLALCHEMY_DATABASE_URI']</span><span class="c5">, ở ví dụ này là sqlite (một ví dụ về MySQL sẽ được trình bày ở phần sau)</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Sau khi đã có file </span><span class="c21">app.py</span><span>&nbsp;trên, chúng ta có thể chạy ứng dụng python shell trong thư mục chứa file </span><span class="c21">app.py</span><span class="c5">&nbsp;này và thực hiện một số thao tác sau:</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.cxjcy16v03s6"><span class="c37 c32">Tạo mới bảng</span></h3><p class="c7"><span class="c5">Sử dụng lệnh sau để tạo mới các bảng tương ứng với các model đã khai báo:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; from app import db</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.create_all()</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7"><span>Sau lệnh này, file </span><span class="c21">students.db</span><span>&nbsp;sẽ được tạo ra trong cùng thư mục với file </span><span class="c21">app.py</span><span>. Nếu sử dụng các tool database client để xem nội dung file này, sẽ thấy bảng </span><span class="c21">student</span><span class="c5">&nbsp;đã được tạo ra.</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.jdv9mzcawp4f"><span class="c37 c32">Tạo mới một số bản ghi</span></h3><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Từ cửa sổ python shell, chúng ta có thể tạo một số bản ghi để test thử</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; from app import Student</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student1 = Student('101', 'Nguyễn Văn An', 'Hà Nội')</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student2 = Student('102', 'Nguyễn Thị Bình', 'TP.HCM')</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.add(student1)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.add(student2)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.commit()</span></p><p class="c2 c8"><span class="c5"></span></p><h3 class="c12" id="h.cao0vc807q9e"><span class="c37 c32">Xem danh sách các bản ghi trong database:</span></h3><p class="c7 c11"><span class="c13">&gt;&gt;&gt; students = Student.query.all()</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; for student in students:</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; &nbsp; &nbsp; print(student.id, student.studentNo, student.studentName, student.address)</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><h3 class="c12" id="h.50qom6dcfca4"><span class="c32 c37">Tìm kiếm bản ghi theo id:</span></h3><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student1 = Student.query.get(1)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; print(student1.id, student1.studentNo, student1.studentName, student1.address)</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><h3 class="c12" id="h.jhwt9oyca0u1"><span class="c37 c32">Sửa bản ghi:</span></h3><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student1 = Student.query.get(1)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student1.address = 'TP. Hà Nội'</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.commit()</span></p><p class="c2 c8"><span class="c5"></span></p><h3 class="c12" id="h.i30t90pko7kk"><span class="c37 c32">Xóa bản ghi:</span></h3><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; student1 = Student.query.get(1)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.delete(student1)</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db.session.commit()</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><h2 class="c30" id="h.h5nn7ymslwuj"><span class="c28">Xây dựng ứng dụng web với các chức năng truy nhập cơ sở dữ liệu cơ bản</span></h2><p class="c7"><span class="c5">Để hiểu rõ hơn các thành phần chức năng trong flask như đã mô tả ở các phần trên, trong phần này chúng ta sẽ xây dựng một ứng dụng web demo thực hiện quản lý học sinh trong một lớp học. Ứng dụng có 2 màn hình chính:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_p2i2djphr8cn-0 start"><li class="c7 c20 c8"><span class="c5">Màn hình danh sách học sinh : hiển thị toàn bộ học sinh trong lớp học</span></li><li class="c7 c20 c8"><span class="c5">Màn hình thêm mới, chỉnh sửa thông tin học sinh : cho phép chỉnh sửa, thêm mới thông tin của từng học sinh.</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Các bước thực hiện như sau :</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.fgy7ziffiktz"><span class="c37 c32">Cài đặt các thư viện cần thiết</span></h3><p class="c7"><span class="c5">Trong ứng dụng này, chúng ta sẽ sử dụng cơ sở dữ liệu là MySQL, do đó cần cài đặt thư việc MySQL client cho Python. &nbsp;Cách thực hiện như sau:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_1ped30x99rba-0 start"><li class="c7 c20 c8"><span>Download thư viện tại : </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=https://www.lfd.uci.edu/~gohlke/pythonlibs/%23mysqlclient&amp;sa=D&amp;ust=1550421914874000">https://www.lfd.uci.edu/~gohlke/pythonlibs/#mysqlclient</a></span></li></ul><p class="c2 c8"><span class="c38 c33"><a class="c19" href="https://www.google.com/url?q=https://www.lfd.uci.edu/~gohlke/pythonlibs/%23mysqlclient&amp;sa=D&amp;ust=1550421914874000"></a></span></p><p class="c7 c8"><span class="c5">Lựa chọn theo đúng phiên bản Python và kiến trúc cpu (32 bit/64bit) của phiên bản Python đã cài đặt.</span></p><ul class="c22 lst-kix_msz2m9p3d6ol-0 start"><li class="c2 c20 c11"><span class="c5"></span></li></ul><ul class="c22 lst-kix_mzdqbryq6jx5-0 start"><li class="c7 c20 c8"><span class="c5">Sử dụng pip để cài đặt thư viện:</span></li></ul><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span class="c5">Mở cửa sổ cmd, di chuyển vào trong thư mục chứa file thư viện đã download, gõ lệnh sau để cài đặt thư viện:</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c23"><span class="c13">pip install &lt;tên file thư viện đã download&gt;</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 931.00px; height: 486.67px;"><img alt="" src="./flask_files/image1.png" style="width: 931.00px; height: 486.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c8"><span class="c13"></span></p><p class="c7 c39"><span class="c14">Cài đặt thư viện mysqlclient</span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.1y1v58v1wqza"><span class="c37 c32">Tạo khung ứng dụng</span></h3><p class="c7"><span class="c5">Mặc dù flask không quy định cấu trúc thư mục và file của các thành phần xử lý nhưng để tiện phát triển, chúng ta nên định nghĩa cấu trúc của các module thành phần ngay từ đầu. Trong ví dụ này, cấu trúc thư mục của ứng dụng sẽ gồm các thành phần như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c23"><span class="c13">static/</span></p><p class="c7 c23"><span class="c13">&nbsp; &nbsp; images</span></p><p class="c7 c23"><span class="c13">templates/</span></p><p class="c7 c23"><span class="c13">&nbsp; &nbsp; list_student.html</span></p><p class="c7 c23"><span class="c13">&nbsp; &nbsp; add_edit_student.html</span></p><p class="c7 c23"><span class="c13">config.py</span></p><p class="c7 c23"><span class="c13">app.py</span></p><p class="c7 c23"><span class="c13">forms.py</span></p><p class="c7 c23"><span class="c13">db_serice.py</span></p><p class="c2 c11"><span class="c5"></span></p><p class="c7"><span class="c5">Trong đó :</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_sxwiqachf4gx-0 start"><li class="c7 c20 c8"><span class="c21">static</span><span>&nbsp;: thư mục chứa các file tĩnh, thư mục con </span><span class="c21">images</span><span class="c5">&nbsp;chứa các ảnh profile của các học sinh</span></li></ul><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_sxwiqachf4gx-0"><li class="c7 c20 c8"><span class="c21">templates</span><span class="c5">&nbsp;: thư mục chứa các template html</span></li></ul><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_wcg34dhrjlda-0 start"><li class="c7 c20 c8"><span class="c21">config.py</span><span class="c5">&nbsp;: File chứa các thông tin cấu hình</span></li></ul><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_z6cx2k85s45j-0 start"><li class="c7 c20 c8"><span class="c21">app.py</span><span class="c5">&nbsp;: File ứng dụng chính của flask</span></li></ul><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_tyllilqqktwa-0 start"><li class="c7 c20 c8"><span class="c21">forms.py</span><span class="c5">&nbsp;: File định nghĩa các form để nhận tham số từ request</span></li></ul><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_59cwpstquhir-0 start"><li class="c7 c20 c8"><span class="c21">db_service.py</span><span class="c5">&nbsp;: File chứa các chức năng truy xuất dữ liệu</span></li></ul><h3 class="c12" id="h.vahn8yk5rbiv"><span class="c37 c32">Khai báo các thông tin cấu hình trong config.py</span></h3><p class="c7"><span>Các thông tin cấu hình trong file </span><span class="c21">config.py</span><span class="c5">&nbsp;như sau:</span></p><p class="c2"><span class="c5"></span></p><a id="t.76d79526ec61e8a98ac2457c584a6f11f181bb07"></a><a id="t.12"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask<br><br>app = Flask(__name__)<br>app.config[</span><span class="c18 c16">'SQLALCHEMY_DATABASE_URI'</span><span class="c0">] = </span><span class="c18 c16">'mysql://admin:1234@localhost/testdb'</span><span class="c0"><br>app.config[</span><span class="c18 c16">'IMG_DIR'</span><span class="c0">] = </span><span class="c18 c16">'static/images'</span><span class="c0"><br>app.config[</span><span class="c18 c16">'SECRET_KEY'</span><span class="c0">] = </span><span class="c18 c16">"abcxyztuv"</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">config.py</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Tạo database model và các hàm truy xuất trong </span><span class="c21">db_serice.py</span><span class="c5">&nbsp;:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.61a25a436a99301e1980fcd2c42658b9640e5de7"></a><a id="t.13"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask_sqlalchemy </span><span class="c15 c4">import</span><span class="c0">&nbsp;SQLAlchemy<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;config </span><span class="c15 c4">import</span><span class="c0">&nbsp;app<br><br>db = SQLAlchemy(app)<br><br></span><span class="c15 c4">class</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">Student</span><span class="c0">(db.Model):<br> &nbsp; &nbsp;id = db.Column(db.Integer, primary_key = </span><span class="c15 c4">True</span><span class="c0">)<br> &nbsp; &nbsp;studentNo = db.Column(</span><span class="c18 c16">'student_no'</span><span class="c0">, db.String(20), unique=</span><span class="c15 c4">True</span><span class="c0">)<br> &nbsp; &nbsp;studentName = db.Column(</span><span class="c18 c16">'student_name'</span><span class="c0">, db.String(50))<br> &nbsp; &nbsp;address = db.Column(</span><span class="c18 c16">'address'</span><span class="c0">, db.String(50))<br> &nbsp; <br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">__init__</span><span class="c0">(self, studentNo, studentName, address):<br> &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo = studentNo<br> &nbsp; &nbsp; &nbsp; &nbsp;self.studentName = studentName<br> &nbsp; &nbsp; &nbsp; &nbsp;self.address = address<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">getAllStudents</span><span class="c0">():<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;Student.query.all()<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">getStudentById</span><span class="c0">(id):<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;Student.query.get(id)<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">createStudent</span><span class="c0">(studentNo, studentName, address):<br> &nbsp; &nbsp;student = Student(studentNo, studentName, address)<br> &nbsp; &nbsp;db.session.add(student)<br> &nbsp; &nbsp;db.session.commit()<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;student<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">updateStudent</span><span class="c0">(id, studentNo, studentName, address):<br> &nbsp; &nbsp;student = Student.query.get(id)<br> &nbsp; &nbsp;student.studentNo = studentNo<br> &nbsp; &nbsp;student.studentName = studentName<br> &nbsp; &nbsp;student.address = address<br> &nbsp; &nbsp;db.session.commit()<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;student<br> &nbsp; &nbsp; &nbsp; &nbsp;<br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">deleteStudent</span><span class="c0">(id):<br> &nbsp; &nbsp;student = Student.query.get(id)<br> &nbsp; &nbsp;db.session.delete(student)<br> &nbsp; &nbsp;db.session.commit()<br><br>db.create_all()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">db_service.py</span></p><p class="c25"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Các chức năng trong file </span><span class="c21">db_service.py</span><span class="c5">&nbsp;đã được mô tả trong phần làm việc với flask_sqlalchemy.</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><h3 class="c12" id="h.zagvrvgrj39h"><span class="c37 c32">Xây dựng màn hình danh sách học sinh</span></h3><p class="c2"><span class="c5"></span></p><p class="c7"><span>Màn hình danh sách học sinh hiển thị toàn bộ các học sinh có trong cơ sở dữ liệu. Do chưa có chức năng thêm mới thông tin học sinh trên giao diện, chúng ta dùng python shell để thêm mới bằng tay một số bản ghi trước để làm dữ liệu test:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; import db_service</span></p><p class="c2 c11"><span class="c13"></span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db_service.createStudent('101', 'Nguyễn Văn An', 'Hà Nội')</span></p><p class="c7 c11"><span class="c13">&gt;&gt;&gt; db_service.createStudent('102', 'Nguyễn Thị Bình', 'TP.HCM')</span></p><p class="c2"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Hàm xử lý endpoint trong file app.py như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.924d34598f531833a2a3ab137c9ae508ccd07237"></a><a id="t.14"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, render_template<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;config </span><span class="c15 c4">import</span><span class="c0">&nbsp;app<br></span><span class="c15 c4">import</span><span class="c0">&nbsp;db_service<br><br></span><span class="c10">@app.route('/')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">list_student</span><span class="c0">():<br> &nbsp; &nbsp;studentList = db_service.getAllStudents()<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">"list_student.html"</span><span class="c0">, studentList=studentList)<br> &nbsp; <br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run(debug = </span><span class="c15 c4">True</span><span class="c0">)</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c21 c16">app.py</span><span class="c14">&nbsp;với chức năng hiển thị danh sách học sinh</span></p><p class="c25"><span class="c14"></span></p><p class="c25"><span class="c14"></span></p><p class="c7"><span>File template cho màn hình danh sách được đặt ở đường dẫn </span><span class="c21">templates/list_student.html</span><span class="c5">&nbsp;với nội dung như sau:</span></p><p class="c2"><span class="c5"></span></p><a id="t.973ef760189576564816bafd85a65f7e6e980534"></a><a id="t.15"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">{% if studentList %}<br> &nbsp;&lt;</span><span class="c3">table</span><span class="c0">&nbsp;border=</span><span class="c18 c16">1</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Student Number&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Student Name&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Address&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp;{% for student in studentList %} &nbsp;<br> &nbsp; &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.studentNo }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.studentName }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.address }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt; &nbsp; &nbsp;<br> &nbsp;{% endfor %}<br> &nbsp;&lt;/</span><span class="c3">table</span><span class="c0">&gt; &nbsp;<br>{% else %}<br> &nbsp;&lt;</span><span class="c3">p</span><span class="c0">&gt;No student available.&lt;/</span><span class="c3">p</span><span class="c0">&gt;<br>{% endif %}</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c25"><span class="c14"></span></p><p class="c27"><span class="c16">File </span><span class="c13">templates/list_student.html</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Khởi động ứng dụng (python app.py), truy nhập vào địa chỉ </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://localhost:5000&amp;sa=D&amp;ust=1550421914892000">http://localhost:5000</a></span><span class="c5">&nbsp;chúng ta sẽ thấy màn hình danh sách học sinh như sau:</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c23"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 535.00px; height: 207.00px;"><img alt="" src="./flask_files/image6.png" style="width: 535.00px; height: 207.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c41"><span class="c14">Màn hình danh sách học sinh (draft)</span></p><p class="c25 c8"><span class="c14"></span></p><h3 class="c12" id="h.c0zglmba22bq"><span class="c37 c32">Màn hình thêm mới chỉnh sửa thông tin học sinh</span></h3><p class="c7"><span>Trước hết , chúng ta tạo một form thông tin học sinh trong file </span><span class="c21">templates/add_edit_student.html</span><span class="c5">:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.49d0b4492606c9866d00b5ffd871fb01c69a1b45"></a><a id="t.16"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">&lt;</span><span class="c3">h3</span><span class="c0">&gt;Student information&lt;/</span><span class="c3">h3</span><span class="c0">&gt;<br><br>&lt;</span><span class="c3">div</span><span class="c0">&nbsp;id=</span><span class="c18 c16">'error_list'</span><span class="c0">&gt;<br> {% if errorList %}<br> &nbsp; &lt;</span><span class="c3">ul</span><span class="c0">&gt;<br> &nbsp; &nbsp; {% for error in errorList %} &nbsp;<br> &nbsp; &nbsp; &nbsp; &lt;</span><span class="c3">li</span><span class="c0">&nbsp;style=</span><span class="c18 c16">'color:red'</span><span class="c0">&gt;{{ error }}&lt;/</span><span class="c3">li</span><span class="c0">&gt;<br> &nbsp; &nbsp; {% endfor %} &nbsp; &nbsp;<br> &nbsp; &lt;/</span><span class="c3">ul</span><span class="c0">&gt;<br> {% endif %}<br>&lt;/</span><span class="c3">div</span><span class="c0">&gt;<br><br>&lt;</span><span class="c3">form</span><span class="c0">&nbsp;method=</span><span class="c18 c16">"post"</span><span class="c0">&nbsp;enctype=</span><span class="c18 c16">'multipart/form-data'</span><span class="c0">&gt;<br>&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'hidden'</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'studentId'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'{{ form.studentId }}'</span><span class="c0">&gt;<br>&lt;</span><span class="c3">table</span><span class="c0">&gt;<br> &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;Student Number&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">input</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'studentNo'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'{{ form.studentNo }}'</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;Student Name&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">input</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'studentName'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'{{ form.studentName }}'</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;Address&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">input</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'address'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'{{ form.address }}'</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;Profile picture&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'file'</span><span class="c0">&nbsp;name=</span><span class="c18 c16">'profilePicture'</span><span class="c0">&gt;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">table</span><span class="c0">&gt;<br>&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'submit'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'Save'</span><span class="c0">&gt;<br>&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'button'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'Back'</span><span class="c0">&nbsp;onclick=</span><span class="c18 c16">'location.href="/"'</span><span class="c0">&gt;<br>&lt;/</span><span class="c3">form</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c25"><span class="c5"></span></p><p class="c7 c23"><span class="c16">File </span><span class="c13">templates/add_edit_student.html</span></p><p class="c25"><span class="c13"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Trong form nhập thông tin, có các trường : mã học sinh, tên, địa chỉ và ảnh đại diện. Sau khi có form html này, chúng ta thêm vào file </span><span class="c21">forms.py</span><span class="c5">&nbsp;một class để chứa các thông tin khi form submit lên server:</span></p><p class="c2"><span class="c5"></span></p><a id="t.9802bbd86f77ec718a765402e586da1090cb1e0a"></a><a id="t.17"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">import</span><span class="c0">&nbsp;os<br></span><span class="c15 c4">import</span><span class="c0">&nbsp;db_service<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;config </span><span class="c15 c4">import</span><span class="c0">&nbsp;app<br><br></span><span class="c15 c4">class</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">StudentForm</span><span class="c0">():<br><br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">__init__</span><span class="c0">(self, request=None, dbModel=None):<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;request:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentId = request.form[</span><span class="c18 c16">'studentId'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo = request.form[</span><span class="c18 c16">'studentNo'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentName = request.form[</span><span class="c18 c16">'studentName'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.address = request.form[</span><span class="c18 c16">'address'</span><span class="c0">]<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;file = request.files.get(</span><span class="c18 c16">'profilePicture'</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;file </span><span class="c15 c4">and</span><span class="c0">&nbsp;file.filename != </span><span class="c18 c16">''</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.profilePictureFile = file<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.profilePictureFile = </span><span class="c15 c4">None</span><span class="c0"><br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">elif</span><span class="c0">&nbsp;dbModel:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentId = dbModel.id<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo = dbModel.studentNo<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentName = dbModel.studentName<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.address = dbModel.address<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">validate</span><span class="c0">(self):<br> &nbsp; &nbsp; &nbsp; &nbsp;errorList = []<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;self.studentNo:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList.append(</span><span class="c18 c16">'Student number is required'</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;self.studentName:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList.append(</span><span class="c18 c16">'Student name is required'</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;self.address:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList.append(</span><span class="c18 c16">'Address is required'</span><span class="c0">)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;self.studentId </span><span class="c15 c4">and</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;self.profilePictureFile:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList.append(</span><span class="c18 c16">'Profile picture is required'</span><span class="c0">) &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;errorList<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">save</span><span class="c0">(self):<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0 c32">&nbsp;self.studentId:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;student = db_service.updateStudent(</span></p><p class="c9"><span class="c0 c32">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentId, </span></p><p class="c9"><span class="c0 c32">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo, </span></p><p class="c9"><span class="c0 c32">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentName, </span></p><p class="c9"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.address)<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">else</span><span class="c0 c32">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;student = db_service.createStudent(</span></p><p class="c9"><span class="c0 c32">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentNo, </span></p><p class="c9"><span class="c0 c32">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.studentName, </span></p><p class="c9"><span class="c0">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.address)<br> &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;student </span><span class="c15 c4">and</span><span class="c0">&nbsp;self.profilePictureFile:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;self.profilePictureFile.save(os.path.join(app.config[</span><span class="c18 c16">'IMG_DIR'</span><span class="c0">], str(student.id) + </span><span class="c18 c16">'.jpg'</span><span class="c0">))</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c13">forms.py</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Tiếp theo, chúng ta bổ sung các hàm xử lý request trong </span><span class="c21">app.py </span><span class="c5">:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.2885c41528bd232225ae6cf2244ca44ac2c8d326"></a><a id="t.18"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, render_template, request, redirect, url_for, jsonify<br></span><span class="c15 c4">import</span><span class="c0">&nbsp;traceback<br></span><span class="c15 c4">import</span><span class="c0">&nbsp;time<br><br></span><span class="c15 c4">from</span><span class="c0">&nbsp;forms </span><span class="c15 c4">import</span><span class="c0">&nbsp;StudentForm<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;config </span><span class="c15 c4">import</span><span class="c0">&nbsp;app<br></span><span class="c15 c4">import</span><span class="c0">&nbsp;db_service<br><br></span><span class="c10">@app.route('/student/add_edit/&lt;int:studentId&gt;', methods = ['GET', 'POST'])</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">add_edit_student</span><span class="c0">(studentId):<br> &nbsp; &nbsp;errorList = []<br> &nbsp; &nbsp;form = StudentForm()<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;request.method == </span><span class="c18 c16">'POST'</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">try</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;form = StudentForm(request)<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList = form.validate()<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;</span><span class="c15 c4">not</span><span class="c0">&nbsp;errorList:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;student = form.save() &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;redirect(url_for(</span><span class="c18 c16">'list_student'</span><span class="c0">))<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">except</span><span class="c0">&nbsp;Exception </span><span class="c15 c4">as</span><span class="c0">&nbsp;e:<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;traceback.print_exc()<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;errorList.append(str(e))<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">elif</span><span class="c0">&nbsp;studentId &gt; 0:<br> &nbsp; &nbsp; &nbsp; &nbsp;student = db_service.getStudentById(studentId)<br> &nbsp; &nbsp; &nbsp; &nbsp;form = StudentForm(dbModel=student)<br> &nbsp; &nbsp;<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">'add_edit_student.html'</span><span class="c0">, form=form, errorList=errorList)<br> &nbsp; &nbsp;<br></span><span class="c10">@app.route('/student/delete/&lt;int:studentId&gt;')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">delete_student</span><span class="c0">(studentId):<br> &nbsp; &nbsp;</span><span class="c15 c4">try</span><span class="c0">:<br> &nbsp; &nbsp; &nbsp; &nbsp;db_service.deleteStudent(studentId)<br> &nbsp; &nbsp;</span><span class="c15 c4">except</span><span class="c0">&nbsp;Exception:<br> &nbsp; &nbsp; &nbsp; &nbsp;traceback.print_exc() &nbsp; &nbsp; &nbsp; &nbsp;<br><br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;redirect(url_for(</span><span class="c18 c16">'list_student'</span><span class="c0">))<br><br></span><span class="c10">@app.route('/')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">list_student</span><span class="c0">():<br> &nbsp; &nbsp;studentList = db_service.getAllStudents()<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;render_template(</span><span class="c18 c16">"list_student.html"</span><span class="c0">, studentList=studentList, time = int(time.time()))<br> &nbsp; <br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run(debug = </span><span class="c15 c4">True</span><span class="c0">)</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c21 c16">app.py </span><span class="c14">sau khi bổ sung các hàm xử lý request thêm mới/chỉnh sửa</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Cuối cùng update file </span><span class="c21">template/list_student.html</span><span class="c5">&nbsp;để link màn hình danh sách sang màn hình thêm mới/chỉnh sửa:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.2ff71bc548cb8b6af90bbe5847025596cdf6991f"></a><a id="t.19"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c0">{% if studentList %}<br> &nbsp;&lt;</span><span class="c3">table</span><span class="c0">&nbsp;border=</span><span class="c18 c16">1</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Student Number&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Student Name&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Address&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;Profile Picture&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">th</span><span class="c0">&gt;&lt;/</span><span class="c3">th</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp;{% for student in studentList %} &nbsp;<br> &nbsp; &nbsp;&lt;</span><span class="c3">tr</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.studentNo }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.studentName }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; {{ student.address }} &lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt; &lt;</span><span class="c3">image</span><span class="c0">&nbsp;width=</span><span class="c18 c16">"256"</span><span class="c0">&nbsp;src=</span><span class="c18 c16">'/static/images/{{student.id}}.jpg?t={{time}}'</span><span class="c0">&gt;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">a</span><span class="c0">&nbsp;href=</span><span class="c18 c16">'{{ url_for("add_edit_student", studentId=student.id) }}'</span><span class="c0">&gt;Edit&lt;/</span><span class="c3">a</span><span class="c0">&gt; |<br> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&lt;</span><span class="c3">a</span><span class="c0">&nbsp;href=</span><span class="c18 c16">'javascript:confirmDelete("{{ url_for("delete_student", studentId=student.id) }}")'</span><span class="c0">&gt;Delete&lt;/</span><span class="c3">a</span><span class="c0">&gt; &nbsp;<br> &nbsp; &nbsp; &nbsp;&lt;/</span><span class="c3">td</span><span class="c0">&gt;<br> &nbsp; &nbsp;&lt;/</span><span class="c3">tr</span><span class="c0">&gt; &nbsp; &nbsp;<br> &nbsp;{% endfor %}<br> &nbsp;&lt;/</span><span class="c3">table</span><span class="c0">&gt; &nbsp;<br> &nbsp;<br> &nbsp;&lt;</span><span class="c3">script</span><span class="c0">&gt;<br> &nbsp; &nbsp;</span><span class="c15 c4">function</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">confirmDelete</span><span class="c0">(url) {<br> &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">(confirm(</span><span class="c18 c16">'Do you want to delete?'</span><span class="c0">)){<br> &nbsp; &nbsp; &nbsp; &nbsp;location.href = url;<br> &nbsp; &nbsp; &nbsp;} &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;}<br> &nbsp;&lt;/</span><span class="c3">script</span><span class="c0">&gt;<br>{% else %}<br> &nbsp;&lt;</span><span class="c3">p</span><span class="c0">&gt;No student available.&lt;/</span><span class="c3">p</span><span class="c0">&gt;<br>{% endif %}<br><br>&lt;</span><span class="c3">br</span><span class="c0">&gt;<br>&lt;</span><span class="c3">input</span><span class="c0">&nbsp;type=</span><span class="c18 c16">'button'</span><span class="c0">&nbsp;value=</span><span class="c18 c16">'Add Student'</span><span class="c0">&nbsp;<br> &nbsp; onclick=</span><span class="c18 c16">'location.href="{{ url_for("add_edit_student", studentId=0) }}"'</span><span class="c0">&gt;</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c16">File </span><span class="c21 c16">templates/list_student.html</span><span class="c14">&nbsp;sau khi update</span></p><p class="c25"><span class="c14"></span></p><p class="c2"><span class="c14"></span></p><p class="c7"><span class="c5">Khởi động lại ứng dụng, vào màn hình danh sách chúng ta sẽ thấy như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 699.00px; height: 641.00px;"><img alt="" src="./flask_files/image12.png" style="width: 699.00px; height: 641.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Màn hình danh sách học sinh sau khi update</span></p><p class="c25"><span class="c14"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Click vào các link thêm mới hoặc chỉnh sửa, chúng ta sẽ sang màn hình thông tin học sinh &nbsp;như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 714.00px; height: 343.00px;"><img alt="" src="./flask_files/image10.png" style="width: 714.00px; height: 343.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c7 c29"><span class="c14">Màn hình thêm mới/chỉnh sửa thông tin học sinh</span></p><p class="c25"><span class="c14"></span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Sau khi update ảnh profile cho các học sinh, quay lại màn hình danh sách chúng ta sẽ thấy có dạng như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 691.00px; height: 441.00px;"><img alt="" src="./flask_files/image4.png" style="width: 691.00px; height: 441.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c5"></span></p><p class="c25"><span class="c14"></span></p><p class="c7 c29"><span class="c14">Màn hình danh sách học sinh sau khi update ảnh profile</span></p><p class="c25"><span class="c14"></span></p><h1 class="c44" id="h.yuvcg1skf970"><span class="c31">Xây dựng webservice với flask</span></h1><p class="c7"><span>Flask cho phép xây dựng các webservice một cách nhanh chóng. Để tạo một webservice với Flask, sử dụng cách khai báo các endpoint theo GET/POST như trong phần trước, chỉ khác là khi trả kết quả về, thì dùng hàm </span><span class="c4 c43">jsonify</span><span>&nbsp;để chuyển dữ liệu sang dạng JSON. Ngoài ra hàm </span><span class="c21">jsonify</span><span class="c5">&nbsp;tự động thêm Content-Type cho response trả về là application/json.</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Ví dụ:</span></p><p class="c2"><span class="c5"></span></p><a id="t.7614820619fddef9aa5683a3708fa8f40c6e602d"></a><a id="t.20"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, jsonify<br>app = Flask(__name__)<br><br><br>app = Flask(__name__)<br><br></span><span class="c10">@app.route('/list_student')</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">list_student_api</span><span class="c0">():<br> &nbsp; &nbsp;studentList = [<br> &nbsp; &nbsp; &nbsp; &nbsp;{</span><span class="c18 c16">'id'</span><span class="c0">&nbsp;: 1, </span><span class="c18 c16">'name'</span><span class="c0">&nbsp;: </span><span class="c18 c16">'Nguyễn Văn An'</span><span class="c0">},<br> &nbsp; &nbsp; &nbsp; &nbsp;{</span><span class="c18 c16">'id'</span><span class="c0">&nbsp;: 2, </span><span class="c18 c16">'name'</span><span class="c0">&nbsp;: </span><span class="c18 c16">'Nguyễn Thị Binh'</span><span class="c0">}, &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;]<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;jsonify({</span><span class="c18 c16">'students'</span><span class="c0">&nbsp;: studentList})<br><br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; app.run(debug = </span><span class="c15 c4">True</span><span class="c0">)</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c14">Tạo một webservice đơn giản với flask</span></p><p class="c25"><span class="c14"></span></p><h2 class="c30" id="h.coamxn57oiwu"><span class="c28">Authentication với flask-jwt</span></h2><p class="c7"><span class="c5">JWT (Json web tokens) là phương pháp authentication thường được sử dụng trong các webservice. Trình tự các bước authentication với JWT như sau:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_kmpse1je8ztd-0 start"><li class="c7 c20 c8"><span class="c5">Ban đầu client gửi thông tin đăng nhập (username/password) lên server, server xác thực, nếu đúng sẽ trả về token </span></li></ul><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_kmpse1je8ztd-0"><li class="c7 c20 c8"><span class="c5">Sau khi client nhận token sẽ lưu giữ cho các lần gọi API sau. Mỗi lần gọi API, client phải gửi token (đặt trong trường Authorization của request header), khi server nhận request sẽ kiểm tra token có hợp lệ không trước khi cho phép truy nhập đến API</span></li></ul><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_kmpse1je8ztd-0"><li class="c7 c20 c8"><span class="c5">Sau một thời gian, token sẽ hết hiệu lực, client phải refresh lại để lấy token mới</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Để sử dụng JWT với flask, cần cài đặt Flask-JWT:</span></p><p class="c2"><span class="c5"></span></p><p class="c7 c8"><span class="c13">pip install Flask-JWT</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Để thực hiện authentication, cần có danh sách username/password tương ứng với các user được phép gọi API. Thông thường danh sách này lưu trong database, ở ví dụ minh họa dưới đây, chúng ta lưu thông user trong một mảng của chương trình:</span></p><p class="c2"><span class="c5"></span></p><p class="c1"><span class="c13">class User(object):</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; def __init__(self, id, username, password):</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; self.id = id</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; self.username = username</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; self.password = password</span></p><p class="c2 c34"><span class="c13"></span></p><p class="c1"><span class="c13">users = [</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; User(1, 'admin', 'abc@123'),</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; User(2, 'guest', '1234'),</span></p><p class="c1"><span class="c13">]</span></p><p class="c2 c34"><span class="c13"></span></p><p class="c1"><span class="c13">username_table = {u.username: u for u in users}</span></p><p class="c1"><span class="c13">userid_table = {u.id : u for u in users}</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7"><span class="c5">Để thực hiện authentication với flask-jwt, cần cung cấp 2 hàm:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_bibu5p8er7uj-0 start"><li class="c7 c20 c8"><span>Hàm </span><span class="c21">authenticate</span><span class="c5">&nbsp;: kiểm tra username/password do client gửi đến (khi lấy token) có hợp lệ không. Hàm này có cấu trúc như sau:</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c1"><span class="c13">def authenticate(username, password):</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; if isCorrect(username, password):</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; &nbsp; &nbsp; return User(username=username)</span></p><p class="c7 c11"><span class="c5">&nbsp; &nbsp; </span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span>Trong trường hợp username/password hợp lệ, hàm </span><span class="c21">authenticate</span><span class="c5">&nbsp;cần trả về đối tượng User tương ứng với username/password đó. Đối tượng User này có thể có các trường thông tin tùy ý, nhưng bắt buộc phải có trường id (sẽ được dùng ở dưới)</span></p><p class="c2 c11"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_bibu5p8er7uj-0"><li class="c7 c20 c8"><span class="c5">Hàm identity : lấy ra thông tin của một user dựa trên id, hàm này có cấu trúc như sau:</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c1"><span class="c13">def identity(payload):</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; userid = payload['identity']</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; return User(id=userid)</span></p><p class="c2 c11"><span class="c5"></span></p><p class="c7 c8"><span>Khi một user đăng nhập thành công và nhận token, Flask-jwt sẽ lưu lại thông tin (userid, token) trong bộ nhớ để authentication cho các lần sau. Khi client gọi API ở các lần tiếp theo, server dựa vào token mà client gửi lên để truy ngược ra user đang thực hiện request (thông tin này được nằm trong một biến được đặt tên là </span><span class="c21">current_identity</span><span class="c5">&nbsp;và có thể được khai thác trong hàm xử lý của API)</span></p><p class="c2 c11"><span class="c5"></span></p><p class="c7"><span>Sau khi đã cung cấp 2 hàm </span><span class="c21">authenticate</span><span>&nbsp;và </span><span class="c21">identity</span><span class="c5">&nbsp;ở trên, các bước cần thực hiện để thêm chức năng authentication cho một API như sau:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_cuzzt0xtb4ti-0 start"><li class="c7 c20 c8"><span class="c5">Tạo mới một đối tượng jwt:</span></li></ul><p class="c2 c8"><span class="c5"></span></p><p class="c1"><span class="c13">from flask_jwt import JWT</span></p><p class="c1"><span class="c13">jwt = JWT(app, authenticate, identity)</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_iv67mwnkt0ou-0 start"><li class="c7 c20 c8"><span>Thêm annotation </span><span class="c21">@jwt_required()</span><span class="c5">&nbsp;vào phía trước các hàm xử lý của các API cần authentication:</span></li></ul><p class="c2 c8"><span class="c5"></span></p><p class="c1"><span class="c13">from flask_jwt import jwt_required, current_identity</span></p><p class="c2 c34"><span class="c13"></span></p><p class="c1"><span class="c13">@app.route('/path')</span></p><p class="c1"><span class="c13">@jwt_required()</span></p><p class="c1"><span class="c13">def api():</span></p><p class="c1"><span class="c13">&nbsp; &nbsp; print('Request from user : ', current_identity.id)</span></p><p class="c1"><span class="c13">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;....</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span>Bên trong hàm xử lý của API, biến </span><span class="c21">current_identity</span><span class="c5">&nbsp;có thể được dùng để lấy thông tin về user đang thực hiện gọi API.</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7"><span class="c5">Chương trình đầy đủ minh họa cách sử dụng Flask-JWT để authentication như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><a id="t.5f337c099034cabfd5dc3d8f8ac4eb2d5dffe765"></a><a id="t.21"></a><table class="c6"><tbody><tr class="c26"><td class="c17" colspan="1" rowspan="1"><p class="c9"><span class="c15 c4">from</span><span class="c0">&nbsp;flask </span><span class="c15 c4">import</span><span class="c0">&nbsp;Flask, jsonify<br></span><span class="c15 c4">from</span><span class="c0">&nbsp;flask_jwt </span><span class="c15 c4">import</span><span class="c0">&nbsp;JWT, jwt_required, current_identity<br><br></span><span class="c15 c4">class</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">User</span><span class="c0">(object):<br> &nbsp; &nbsp;</span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">__init__</span><span class="c0">(self, id, username, password):<br> &nbsp; &nbsp; &nbsp; &nbsp;self.id = id<br> &nbsp; &nbsp; &nbsp; &nbsp;self.username = username<br> &nbsp; &nbsp; &nbsp; &nbsp;self.password = password<br><br>users = [<br> &nbsp; &nbsp;User(1, </span><span class="c18 c16">'admin'</span><span class="c0">, </span><span class="c18 c16">'abc@123'</span><span class="c0">),<br> &nbsp; &nbsp;User(2, </span><span class="c18 c16">'guest'</span><span class="c0">, </span><span class="c18 c16">'1234'</span><span class="c0">),<br>]<br><br>username_table = {u.username: u </span><span class="c15 c4">for</span><span class="c0">&nbsp;u </span><span class="c15 c4">in</span><span class="c0">&nbsp;users}<br>userid_table = {u.id : u </span><span class="c15 c4">for</span><span class="c0">&nbsp;u </span><span class="c15 c4">in</span><span class="c0">&nbsp;users}<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">authenticate</span><span class="c0">(username, password):<br> &nbsp; &nbsp;user = username_table.get(username, </span><span class="c15 c4">None</span><span class="c0">)<br> &nbsp; &nbsp;</span><span class="c15 c4">if</span><span class="c0">&nbsp;user </span><span class="c15 c4">and</span><span class="c0">&nbsp;user.password == password:<br> &nbsp; &nbsp; &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;user<br><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">identity</span><span class="c0">(payload):<br> &nbsp; &nbsp;userid = payload[</span><span class="c18 c16">'identity'</span><span class="c0">]<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;userid_table[userid]<br><br>app = Flask(__name__)<br>app.debug = </span><span class="c15 c4">True</span><span class="c0"><br>app.config[</span><span class="c18 c16">'SECRET_KEY'</span><span class="c0">] = </span><span class="c18 c16">'abcdxyztuv'</span><span class="c0"><br><br>jwt = JWT(app, authenticate, identity)<br><br></span><span class="c10">@app.route('/list_student')</span><span class="c0"><br></span><span class="c10">@jwt_required()</span><span class="c0"><br></span><span class="c15 c4">def</span><span class="c0">&nbsp;</span><span class="c24 c16 c4">list_student_api</span><span class="c0">():<br> &nbsp; &nbsp;studentList = [<br> &nbsp; &nbsp; &nbsp; &nbsp;{</span><span class="c18 c16">'id'</span><span class="c0">&nbsp;: 1, </span><span class="c18 c16">'name'</span><span class="c0">&nbsp;: </span><span class="c18 c16">'Nguyễn Văn An'</span><span class="c0">},<br> &nbsp; &nbsp; &nbsp; &nbsp;{</span><span class="c18 c16">'id'</span><span class="c0">&nbsp;: 2, </span><span class="c18 c16">'name'</span><span class="c0">&nbsp;: </span><span class="c18 c16">'Nguyễn Thị Binh'</span><span class="c0">}, &nbsp; &nbsp; &nbsp; &nbsp;<br> &nbsp; &nbsp;]<br> &nbsp; &nbsp;</span><span class="c15 c4">return</span><span class="c0">&nbsp;jsonify({</span><span class="c18 c16">'username'</span><span class="c0">&nbsp;: current_identity.username, </span><span class="c18 c16">'students'</span><span class="c0">&nbsp;: studentList})<br><br></span><span class="c15 c4">if</span><span class="c0">&nbsp;__name__ == </span><span class="c18 c16">'__main__'</span><span class="c0">:<br> &nbsp; &nbsp;app.run()</span></p></td></tr></tbody></table><p class="c2"><span class="c5"></span></p><p class="c27"><span class="c14">Chương trình minh họa cách sử dụng authentication với Flask-JWT</span></p><p class="c25"><span class="c14"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Khởi động server, dùng trình duyệt để truy nhập API ở địa chỉ </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://localhost:5000/list_student&amp;sa=D&amp;ust=1550421914931000">http://localhost:5000/list_student</a></span><span class="c5">&nbsp;chúng ta sẽ thấy kết quả như sau:</span></p><p class="c2"><span class="c5"></span></p><p class="c2"><span class="c5"></span></p><p class="c8 c25"><span class="c5"></span></p><p class="c1"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 565.00px; height: 307.00px;"><img alt="" src="./flask_files/image2.png" style="width: 565.00px; height: 307.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c27"><span class="c14">Lỗi khi truy nhập API từ trình duyệt</span></p><p class="c25 c8"><span class="c14"></span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Do không có thông tin đăng nhập nên API không trả về kết quả mà sẽ hiện thông báo lỗi 401.</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span>Để thực hiện test API, cần sử dụng một tool REST client, ví dụ </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=https://www.getpostman.com/&amp;sa=D&amp;ust=1550421914932000">Postman</a></span><span class="c5">.</span></p><p class="c2"><span class="c5"></span></p><p class="c7"><span class="c5">Quá trình gọi API gồm các bước:</span></p><p class="c2"><span class="c5"></span></p><ul class="c22 lst-kix_5xw6kslyeabv-0 start"><li class="c7 c20 c8"><span>Thực hiện POST đến địa chỉ </span><span class="c33"><a class="c19" href="https://www.google.com/url?q=http://localhost:5000/auth&amp;sa=D&amp;ust=1550421914933000">http://localhost:5000/auth</a></span><span>&nbsp;với nội dung (dạng contentType là </span><span class="c21">application/json</span><span class="c5">) với nội dung như sau:</span></li></ul><p class="c2"><span class="c5"></span></p><p class="c7 c11"><span class="c13">{</span></p><p class="c7 c11"><span class="c13">&nbsp; &nbsp; "username" : "&lt;username&gt;",</span></p><p class="c7 c11"><span class="c13">&nbsp; &nbsp; "password" : "&lt;password&gt;"</span></p><p class="c7 c11"><span class="c13">}</span></p><p class="c2 c11"><span class="c32 c21 c42"></span></p><p class="c7 c8"><span class="c5">Nếu thông tin username/password đúng, server sẽ trả về token, ví dụ:</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span class="c21 c16">{"access_token" : "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NTAzMTY3NjAsImlhdCI6MTU1MDMxNjQ2MCwibmJmIjoxNTUwMzE2NDYwLCJpZGVudGl0eSI6MX0.TluqwWXl-f9JaLCXpy6AISNSg4KmEF-a0UhKqO7q0XU"}</span><span class="c5">&nbsp;</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 931.00px; height: 456.00px;"><img alt="" src="./flask_files/image13.png" style="width: 931.00px; height: 456.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c45"><span class="c14">Lấy token từ server</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c2 c8"><span class="c5"></span></p><ul class="c22 lst-kix_uhbp3sqigu8a-0 start"><li class="c7 c20 c8"><span class="c5">Sử dụng token đã nhận được để gọi API</span></li></ul><p class="c7 c8"><span>Sau khi đã có token, để gọi API, ngoài các tham số thông thường do API quy định, cần thêm vào header của request trường </span><span class="c21">Authorization</span><span>&nbsp;với nội dung có giá trị bằng </span><span class="c21">"JWT " + token, </span><span class="c5">cụ thể ở ví dụ trên là :</span></p><p class="c2 c8"><span class="c5"></span></p><p class="c7 c8"><span class="c13">JWT eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NTAzMTY3NjAsImlhdCI6MTU1MDMxNjQ2MCwibmJmIjoxNTUwMzE2NDYwLCJpZGVudGl0eSI6MX0.TluqwWXl-f9JaLCXpy6AISNSg4KmEF-a0UhKqO7q0XU</span></p><p class="c2 c8"><span class="c13"></span></p><p class="c2 c8"><span class="c13"></span></p><p class="c7"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 931.00px; height: 452.00px;"><img alt="" src="./flask_files/image8.png" style="width: 931.00px; height: 452.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c2"><span class="c5"></span></p><p class="c7 c29"><span class="c16">Thêm thông tin Authorization vào header request để gọi được API</span></p>

    <!-- Bootstrap core JavaScript -->
    <script src="../vendor/jquery/jquery.min.js"></script>
    <script src="../vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Custom scripts for this template -->
    <script src="../js/clean-blog.min.js"></script>
</body></html>